import{_ as u,o as h,c,e as p,a as s,t as r,F as _,r as f,d as y}from"./index-810f0f64.js";const b={name:"video-list",props:{socket:{type:Object,default:null},videoList:{type:Object,default:{}},defaultauthor:{type:String,default:""}},data(){return{prehost:"http://localhost:16206/"}},methods:{fetchOpen(t){let e=`${this.prehost}open/${t}`;fetch(e).then()},fetchDownload(t){let e={vid:t},a=`${this.prehost}notice/mp4`,l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(a,l).then()},fetchVideoDelete(t,e,a){delete this.videoList[t],this.$emit("delete-vid",t),Object.keys(this.videoList).length===0&&(this.$emit("go-allauthor",this.defaultauthor),this.$emit("delete-author",e));let d={vid:t,withfile:a},o=`${this.prehost}video/`,n={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};fetch(o,n).then()},copyText(t){window.navigator.clipboard.writeText(t)}}},v=["id"],m={class:"my-3"},g={class:"btn btn-outline-info"},C={class:"btn disabled"},k=["onClick"],T=["onClick"],$=["onClick"],L=["onClick"],A={class:"my-3"},x={class:"btn disabled"},V={class:"my-3"},D=["onClick"],w={class:"my-3"},O=["onClick"],j=["onClick"];function S(t,e,a,l,d,o){return h(!0),c(_,null,p(this.videoList,n=>(h(),c("div",{class:"row border my-3",key:n.vid,id:n.vid},[s("div",m,[s("button",g,r(n.vid),1),s("button",C,r(n.quality),1),s("button",{class:"btn btn-outline-info",onClick:i=>o.copyText(n.title)},"copy title ",8,k),s("button",{class:"btn btn-outline-info",onClick:i=>o.copyText(n.description)},"copy description ",8,T),s("button",{class:"btn btn-outline-info",onClick:i=>o.copyText(n.vlink)},"copy video url ",8,$),s("button",{class:"btn btn-outline-info",onClick:i=>o.fetchDownload(n.vid)},"download video ",8,L)]),s("div",A,[s("button",x,r(n.author),1)]),s("div",V,[s("button",{onClick:i=>o.fetchOpen(n.vid),class:"btn btn-outline-primary"},r(n.title),9,D)]),s("div",w,[s("button",{class:"btn btn-outline-danger",onClick:i=>o.fetchVideoDelete(n.vid,n.author,!1)},"delete data ",8,O),s("button",{class:"btn btn-outline-danger",onClick:i=>o.fetchVideoDelete(n.vid,n.author,!0)}," delete data and mp4 jpg file ",8,j)])],8,v))),128)}const N=u(b,[["render",S]]),B={name:"search-view",components:{VideoList:N},data(){return{prehost:"http://localhost:16206/",defaultauthor:"All Author",authorList:{},videoList:{},searchType:!1,searchTypText:""}},methods:{titleChange(t){let e=t.target.value;if(e.length>0){let a=`${this.prehost}video/title/${e}`;fetch(a).then(l=>l.json()).then(l=>{this.videoList=l})}},changeSearchType(){this.searchType=!this.searchType,this.searchTypText=this.searchType?"author":"title",this.videoList=null},deleteVid(t){delete this.videoList[t]},deleteAuthor(t){delete this.authorList[t]},goAllAuthor(t){this.$refs.selectOnAuthor.value=t},fetchAllAuthor(){let t=`${this.prehost}video/authors`;fetch(t).then(e=>e.json()).then(e=>{this.authorList=e})},authorChange(t){let e=t.target.value;if(e.includes(this.defaultauthor))this.videoList=null;else{let a=`${this.prehost}video/author/${e}`;fetch(a).then(l=>l.json()).then(l=>{this.videoList=l})}}},created(){this.fetchAllAuthor(),this.changeSearchType()}},F={class:"container-fluid"},G={class:"row my-3"},J={class:"col-auto"},q={class:"btn btn-secondary disabled"},E={key:0,class:"col-auto"},I=["value"],P=["value"],z={key:1,class:"col-auto"},H={for:"vtitle"};function K(t,e,a,l,d,o){const n=f("VideoList");return h(),c("div",F,[s("div",G,[s("div",J,[s("button",{onClick:e[0]||(e[0]=(...i)=>o.changeSearchType&&o.changeSearchType(...i)),class:"btn btn-outline-primary"},"search type "),s("button",q,r(this.searchTypText),1)]),d.searchType?(h(),c("div",E,[s("select",{ref:"selectOnAuthor",class:"form-select","aria-label":"Default select example",onChange:e[1]||(e[1]=(...i)=>o.authorChange&&o.authorChange(...i))},[s("option",{selected:"",value:this.defaultauthor},r(this.defaultauthor),9,I),(h(!0),c(_,null,p(this.authorList,i=>(h(),c("option",{value:i,key:i},r(i),9,P))),128))],544)])):(h(),c("div",z,[s("label",H,[s("input",{onInput:e[2]||(e[2]=(...i)=>o.titleChange&&o.titleChange(...i)),class:"form-control",id:"vtitle",type:"text",placeholder:"type title to search"},null,32)])]))]),y(n,{videoList:this.videoList,defaultauthor:this.defaultauthor,onDeleteVid:o.deleteVid,onGoAllauthor:o.goAllAuthor,onDeleteAuthor:o.deleteAuthor},null,8,["videoList","defaultauthor","onDeleteVid","onGoAllauthor","onDeleteAuthor"])])}const Q=u(B,[["render",K]]);export{Q as default};
