import{_ as u,o as h,c,r as p,a as s,t as r,F as f,b as _,d as v}from"./index-0c6331df.js";const y={name:"video-list",props:{socket:{type:Object,default:null},videoList:{type:Object,default:{}},defaultauthor:{type:String,default:""}},data(){return{prehost:"http://localhost:16206/"}},methods:{fetchOpen(t){let e=`${this.prehost}open/${t}`;fetch(e).then()},fetchDownload(t){let e={vid:t},n=`${this.prehost}notice/mp4`,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(n,a).then()},fetchVideoDelete(t,e,n){delete this.videoList[t],this.$emit("delete-vid",t),Object.keys(this.videoList).length===0&&(this.$emit("go-allauthor",this.defaultauthor),this.$emit("delete-author",e),console.log(`author=
`,e,`
`));let d={vid:t,withfile:n},i=`${this.prehost}video/`,o={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};fetch(i,o).then()},copyText(t){window.navigator.clipboard.writeText(t)}}},b=["id"],m={class:"my-3"},g={class:"btn btn-outline-info"},k={class:"btn disabled"},$=["onClick"],A=["onClick"],C=["onClick"],T=["onClick"],L={class:"my-3"},S={class:"btn disabled"},w={class:"my-3"},V=["onClick"],x={class:"my-3"},O=["onClick"],j=["onClick"];function D(t,e,n,a,d,i){return h(!0),c(f,null,p(this.videoList,o=>(h(),c("div",{class:"row border my-3",key:o.vid,id:o.vid},[s("div",m,[s("button",g,r(o.vid),1),s("button",k,r(o.quality),1),s("button",{class:"btn btn-outline-info",onClick:l=>i.copyText(o.title)},"copy title ",8,$),s("button",{class:"btn btn-outline-info",onClick:l=>i.copyText(o.description)},"copy description ",8,A),s("button",{class:"btn btn-outline-info",onClick:l=>i.copyText(o.vlink)},"copy video url ",8,C),s("button",{class:"btn btn-outline-info",onClick:l=>i.fetchDownload(o.vid)},"download video ",8,T)]),s("div",L,[s("button",S,r(o.author),1)]),s("div",w,[s("button",{onClick:l=>i.fetchOpen(o.vid),class:"btn btn-outline-primary"},r(o.title),9,V)]),s("div",x,[s("button",{class:"btn btn-outline-danger",onClick:l=>i.fetchVideoDelete(o.vid,o.author,!1)},"delete data ",8,O),s("button",{class:"btn btn-outline-danger",onClick:l=>i.fetchVideoDelete(o.vid,o.author,!0)}," delete data and mp4 jpg file ",8,j)])],8,b))),128)}const N=u(y,[["render",D]]),R={name:"search-nav",components:{VideoList:N},props:{messageSearch:{type:Object,default:null}},watch:{async messageSearch(t,e){if(t){let{dowhat:n,info:a}=t;switch(n){case"fetchAllAuthor":await this.fetchAllAuthor();break;case"fetchAuthorVideo":this.$emit("click-search-router",null),await this.fetchAllAuthor(),await this.fetchAuthorVideo(a);break}}}},data(){return{prehost:"http://localhost:16206/",defaultauthor:"All Author",authorList:{},videoList:{},searchType:!1,searchTypText:""}},methods:{titleChange(t){this.videoList=null;let e=t.target.value;if(e.length>0){let n=`${this.prehost}video/title/${e}`;fetch(n).then(a=>a.json()).then(a=>{this.videoList=a})}},changeSearchType(){this.searchType=!this.searchType,this.searchTypText=this.searchType?"author":"title",this.videoList=null},deleteVid(t){delete this.videoList[t]},deleteAuthor(t){delete this.authorList[t];let e=`${this.prehost}notice/fetchallauthor`;fetch(e)},goAllAuthor(t){this.$refs.selectOnAuthor.value=t},async fetchAllAuthor(){let t=`${this.prehost}video/authors`,n=await(await fetch(t)).json();this.authorList=n},async fetchAuthorVideo(t){this.$refs.selectOnAuthor.value=t;let e=`${this.prehost}video/author/${t}`,a=await(await fetch(e)).json();this.videoList=a},authorChange(t){let e=t.target.value;e.includes(this.defaultauthor)?this.videoList=null:this.fetchAuthorVideo(e)}},async created(){await this.fetchAllAuthor(),this.changeSearchType()}},B={class:"row my-3"},F={class:"col-auto"},G={class:"btn btn-secondary disabled"},J={key:0,class:"col-auto"},q=["value"],E=["value"],I={key:1,class:"col-auto"},P={for:"vtitle"};function z(t,e,n,a,d,i){const o=_("VideoList");return h(),c("div",null,[s("div",B,[s("div",F,[s("button",{onClick:e[0]||(e[0]=(...l)=>i.changeSearchType&&i.changeSearchType(...l)),class:"btn btn-outline-primary"},"search type "),s("button",G,r(this.searchTypText),1)]),d.searchType?(h(),c("div",J,[s("select",{ref:"selectOnAuthor",class:"form-select","aria-label":"Default select example",onChange:e[1]||(e[1]=(...l)=>i.authorChange&&i.authorChange(...l))},[s("option",{selected:"",value:this.defaultauthor},r(this.defaultauthor),9,q),(h(!0),c(f,null,p(this.authorList,l=>(h(),c("option",{value:l,key:l},r(l),9,E))),128))],544)])):(h(),c("div",I,[s("label",P,[s("input",{onInput:e[2]||(e[2]=(...l)=>i.titleChange&&i.titleChange(...l)),class:"form-control",id:"vtitle",type:"text",placeholder:"type title to search"},null,32)])]))]),v(o,{videoList:this.videoList,defaultauthor:this.defaultauthor,onDeleteVid:i.deleteVid,onGoAllauthor:i.goAllAuthor,onDeleteAuthor:i.deleteAuthor},null,8,["videoList","defaultauthor","onDeleteVid","onGoAllauthor","onDeleteAuthor"])])}const H=u(R,[["render",z]]),K={name:"search-view",components:{SearchNav:H},props:{messageSearch:{type:Object,default:null}},methods:{clickSearchRouter(){this.$emit("click-search-router",null)}}},M={class:"container-fluid"};function Q(t,e,n,a,d,i){const o=_("SearchNav");return h(),c("div",M,[v(o,{messageSearch:this.messageSearch,onClickSearchRouter:this.clickSearchRouter},null,8,["messageSearch","onClickSearchRouter"])])}const W=u(K,[["render",Q]]);export{W as default};
