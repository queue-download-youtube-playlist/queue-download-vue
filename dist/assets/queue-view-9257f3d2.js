import{_ as r,o as a,c,F as _,e as f,a as o,t as u,f as h,b,r as m,g as y}from"./index-73556fe9.js";const g={name:"queue-list",props:{socket:{type:Object,default:null},messageQueue:{type:Object,default:null}},watch:{messageQueue(e,t){if(e){let{dowhat:s,queue:n}=e;s&&this[s](n)}}},data(){return{prehost:"http://localhost:16206/",queueList:{},messageNoQueue:"there is no queue for you"}},methods:{queueAdd(e){let{playlist:t}=e;this.queueList[t]=e},queueUpdate(e){let{playlist:t}=e;if(this.queueList.hasOwnProperty(t))for(let s in e)this.queueList[t][s]=e[s]},fetchPlaylistDownload(e){let t={queue:e},s=`${this.prehost}queue/download`,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(s,n).then()},fetchOpenNewTab(e){},fetchQueueDelete(e){delete this.queueList[e.playlist];let t={queue:e},s=`${this.prehost}queue/`,n={method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(s,n).then()},fetchGetAllVid(e){let t={queue:e},s=`${this.prehost}notice/playlist/`,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch(s,n).then()},fetchQueueAll(){let e=`${this.prehost}queue/all`;fetch(e).then(t=>t.json()).then(t=>{this.queueList=t})}},created(){this.fetchQueueAll()}},k={id:"queuearr",class:"container-fluid"},v={class:"col-md-12"},Q=["onClick"],$={class:"col-auto"},C=["onClick"],O=o("div",{class:"col-2"},null,-1),w={class:"col-auto"},L=["onClick"],N={class:"btn disabled"},j={class:"btn disabled"},q=["disabled","onClick"],T={key:0,class:"row border my-3"},S={class:"btn disabled"};function V(e,t,s,n,p,i){return a(),c("div",k,[(a(!0),c(_,null,f(this.queueList,l=>(a(),c("div",{class:"row border my-3",key:l.playlist},[o("div",v,[o("button",{onClick:d=>i.fetchOpenNewTab(l),class:"btn disabled"},u(l.title),9,Q)]),o("div",$,[o("button",{class:"btn btn-outline-danger",onClick:d=>i.fetchQueueDelete(l)}," delete this playlist and all sub task ",8,C)]),O,o("div",w,[o("button",{onClick:d=>i.fetchGetAllVid(l),class:"btn btn-outline-info"}," get all video id ",8,L),o("button",N,[h(" total "),o("span",null,u(l.total),1)]),o("button",j,[h(" progress "),o("span",null,u(l.progress),1)]),o("button",{disabled:l.total===l.progress,onClick:d=>i.fetchPlaylistDownload(l),class:"btn btn-outline-info"},"download all video ",8,q)])]))),128)),Object.keys(this.queueList).length===0?(a(),c("div",T,[o("button",S,u(this.messageNoQueue),1)])):b("",!0)])}const x=r(g,[["render",V]]),A={name:"queue-view",components:{QueueList:x},props:{socket:{type:Object,default:null},messageQueue:{type:Object,default:null}}};function D(e,t,s,n,p,i){const l=m("QueueList");return a(),y(l,{socket:this.socket,messageQueue:this.messageQueue},null,8,["socket","messageQueue"])}const B=r(A,[["render",D]]);export{B as default};
